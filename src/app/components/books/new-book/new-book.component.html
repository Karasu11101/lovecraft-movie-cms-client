<div class="row contenitore" style="border-radius: 25px;">
  <div class="col-sm-6 mx-auto">

    <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Insert new book sheet</p>

    <form class="mx-1 mx-md-4" [formGroup]="form" (ngSubmit)="onSubmit()" id="signUpForm">
      <div class="d-flex flex-row align-items-center mb-4">
        <div class="form-outline flex-fill mb-0">
          <i class="pi pi-pencil" ></i>
          <label>Title</label>
          <input placeholder="Title" type="text" id="title" name="title" formControlName="title"  class="form-control"/>
          <p class="help is-danger" *ngIf="form.controls.title.hasError('required') && form.controls.title.touched">Title is required</p>
        </div>
      </div>

      <div class="d-flex flex-row align-items-center mb-4">
        <div class="form-outline flex-fill mb-0">
          <i class="pi pi-book" ></i>
          <label>Plot</label>
          <input class="description-input" placeholder="Description" type="text" id="description" name="description" formControlName="description"  class="form-control"/>
          <!-- <ckeditor background-color: white;" [editor]="Editor" class="movieDescription" formControlName="description" (ready)="onReady($event)"></ckeditor> -->
          <p class="help is-danger" *ngIf="form.controls.description.hasError('required') && form.controls.description.touched">Description is required</p>
        </div>
      </div>

      <div class="d-flex flex-row align-items-center mb-4">
        <div class="form-outline flex-fill mb-0">
          <i class="pi pi-camera" ></i>
          <label>Image</label>
          <input placeholder="Load an image" type="text" id="image" name="image" formControlName="image"  class="form-control"/>
          <p class="help is-danger" *ngIf="form.controls.image.hasError('required') && form.controls.image.touched">Please upload an image</p>
          <div class="imageDiv" *ngIf="form.controls.image.value">
            <img [src]="form.controls.image.value">
          </div>
        </div>
      </div>

      <div class="d-flex flex-row align-items-center mb-4">
        <div class="form-outline flex-fill mb-0">
          <i class="pi pi-calendar" ></i>
          <label>Publish date</label>
          <input placeholder="Published" type="text" id="published" name="published" formControlName="published"  class="form-control"/>
          <p class="help is-danger" *ngIf="form.controls.title.hasError('required') && form.controls.title.touched">Publish date is required</p>
        </div>
      </div>

      <div class="form-check d-flex justify-content-left mb-5">
        <input class="form-check-input me-2" type="checkbox" value="" id="confirm" name="confirm" formControlName="confirm"/>
        <label id="confirm" class="form-check-label" for="confirm">
          Confirm to complete the creation process
        </label>
      </div>


      <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
        <button type="submit" class="btn btn-primary btn-lg" [disabled]="!form.valid">Add</button>
      </div>

    </form>

  </div>
</div>

<ng-template #modalSummary let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
  </div>
  <div class="modal-body">
    <h3>Movie sheet summary:</h3>
    <ul>
      <li><strong>Title: </strong>{{form.controls.title.value}}</li>
      <li><strong>Description:</strong>
        <!-- <p>{{form.controls.description.value}}</p> -->
        <span [innerHtml]="description"></span>
      </li>
      <li><strong>Image:</strong>
        <div class="summaryImg">
          <img [src]="form.controls.image.value" id="modalImage">
        </div>
      </li>
    </ul>
  </div>
  <div class="modal-footer">
    <button id="backButton" type="button" class="btn" aria-label="cancel" (click)="modal.dismiss()">Back to Books</button>
    <button id="newMovieButton" type="button" class="btn btn-primary" aria-label="action" (click)="modal.close()" appButtonShadow>Insert new book</button>
  </div>
</ng-template>
